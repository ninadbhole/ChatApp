<!DOCTYPE html>
<html>
<head>
  <title>Socket.io Chat App</title>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
  <header>
    <h1>Chat App</h1>
  </header>
  
  <div id="prompt" class="modal">
    <div class="modal-content">
      <h2>Welcome to the Chat App!</h2>
      <p>Please enter your name to join the chat:</p>
      <form id="name-form" action="">
        <input id="name-input" type="text" placeholder="Your name" />
        <button>Join</button>
      </form>
    </div>
  </div>
    
    <div id="chat-content">
      <ul id="messages"></ul>
      <form id="form" action="">
        <input id="input" autocomplete="off" placeholder="Type a message..." />
        <button>Send</button>
      </form>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $(function () {
      const socket = io();
      const $prompt = $('#prompt');
      const $chatContainer = $('#chat-container');
      const $nameForm = $('#name-form');
      const $nameInput = $('#name-input');
      const $chatContent = $('#chat-content');
      const $messages = $('#messages');
      const $form = $('#form');
      const $input = $('#input');
      let username;

      $nameForm.submit(function() {
        username = $nameInput.val();
        if (username) {
          $prompt.addClass('hidden');
          $chatContainer.removeClass('hidden');
        }
        return false;
      });
  
      $form.submit(function() {
        if ($input.val()) {
          socket.emit('chat message', { username, message: $input.val() });
          $input.val('');
        }
        return false;
      });
  
      socket.on('chat message', function(data) {
        $messages.append($('<li>').text(data.username + ": " + data.message));
        $chatContent.scrollTop($chatContent[0].scrollHeight);
      });
  
    });
  </script>
  
</body>
</html>
